20230517 Bigdata Mini Project

- 결과 도출


** 주제 : 태양광 발전과 기상 요인 상관 관계 분석
           (태양광 에너지 발전량 예측)

** 목적 및 배경
    목적 : 예측 제도를 통해 재생에너지 발전량 예측 능력 제고함으로써
            재생에너지의 변동성으로 생기는 발전기 기동 신뢰성을 높여
            비용을 절감하는 등의 효율적인 전력계통 운영 기대

    관련 사업 : '20. 9.18. 재생에너지 발전량 예측 제도 도입
                  (전력중개 발전량 예측제도 - 산업통상자원부)
                  -> 발전량을 하루 전에 미리 예측하여 제출 -> 오차율에 따른 정산금 지급

                  해외 주요 국가는 이미 유사한 제도를 시행 중에 있음
                  - 재생발전량 입찰제도 (독일)
                  - 재생발전량 자체 예측기술 평가제도 (호주)
    
    + 태양광 발전량의 가격은 태양광 발전량에 의한 많은 양의 전기가 생산되었을 때
       전기 가격이 상승하여 사업자의 수익을 최대화하는데 도움이 될 수 있음


  * 배경 지식
    태양광 발전에 영향을 주는 요인
    - 일사량, 운량, 온도, 습도 등과 같은 기상 상태 요인이 크게 작용
    - 계절에 따른 가조시간 차(일출-일몰 시간차)

  * 기사
    최대전력수요 우려 관련 기사
     https://www.electimes.com/news/articleView.html?idxno=307360
     https://www.newspim.com/news/view/20230120000328
    최대전력수요 증가 관련 기사
     https://www.electimes.com/news/articleView.html?idxno=313325
    태양광 확대에 따른 수요예측 정확도 관련 기사
     https://www.electimes.com/news/articleView.html?idxno=314031
     https://m.ekn.kr/view.php?key=20230223010005048
    산업통상자원부 보도참고자료
    file:///C:/Users/ITPS/Downloads/(%EB%B3%B4%EB%8F%84%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C)%EC%A0%84%EB%A0%A5%EC%8B%9C%EC%9E%A5%EA%B3%BC,%20%EC%9E%AC%EC%83%9D%EC%97%90%EB%84%88%EC%A7%80%20%EB%B0%9C%EC%A0%84%EB%9F%89%20%EC%98%88%EC%B8%A1%EC%A0%9C%EB%8F%84%20%EB%8F%84%EC%9E%85.pdf


  * 개인적 관심
    최근 재생에너지 발전량 예측에 대한 중요성이 대두되며 재생에너지 통합관제 시스템 구축     
    사업 추진에 대한 필요성이 지속적으로 검토되고 있음
    -> 관련 내용에 대한 이해와 직접적으로 데이터 분석을 통해 접해봄으로써
        발전량 예측에 대한 이해도를 높이고 통합관제 시스템 설계 방향성을 잡고자 함

  * 분석 범위
   - 광역시도별 구분 : 부산 지역 특정
   - 2018~2022년(5년), 시간대별(6~20시) 발전량, 기상 데이터 추이    
   
  * 분석 목표
    1. 태양광 발전량과 기상 요인 각각의 상관관계, 주된 영향을 주는 요소 분석
    2. 가조시간(일출-일몰 사이)이 가장 긴 하지와 가장 짧은 동지의 발전량 비교
    3. 태양광 발전량과 기상청 데이터(일사량)를 활용한 발전량 예측 모델 설계


** 데이터

  - 수집 데이터
   1. 지역별 시간별 태양광 발전량
   2. 일사량, 강수량, 기온, 습도, 풍속, 풍향, 전운량 7종 기상 데이터
   3. 예측 모델 비교군 : 기상기후 빅데이터 분석 플랫폼 날씨마루 제공 데이터

  - 데이터 수집방법 선정 근거
    기상 데이터의 경우 케이웨더, 웨더아이 등 기업 데이터는 유료로 제공되므로,
    무료로 제공되는 데이터 중 시간대별 필요 기상 데이터 7종을 받아올 수 있는
    기상청 기상자료개방포털에서 csv파일로 수집 

    기상자료개방포털
      - 종관기상관측(ASOS)
        https://data.kma.go.kr/data/grnd/selectAsosRltmList.do?pgmNo=36
      - 방재기상관측(AWS)
        https://data.kma.go.kr/data/grnd/selectAwsRltmList.do?pgmNo=56
      - 관측지점정보 (지점별 위도, 경도)
        https://data.kma.go.kr/tmeta/stn/selectStnList.do?pgmNo=123

   - 발전량 데이터의 경우 발전소를 시공하는 시공사 혹은 모니터링 서비스 제공
     업체 사유 데이터 외 신뢰도 높은 데이터 수집이 어려워 한국전력거래소에서
     제공되는 시간대별 전력거래량 데이터를 csv파일로 수집
     (해당 데이터는 한전과 직접 거래하는 발전기, 자가 발전용 외 발전기의 발전량을 종합한 값)

     data.go.kr
      - 한국전력거래소_지역별 시간별 태양광 발전량
        https://www.data.go.kr/data/15065269/fileData.do

   - 시간대별 일사량 예측 데이터를 아래 사이트에서 크롤링하여 예측 모델 결과값과 비교

     기상기후 빅데이터 분석 플랫폼 날씨마루 제공 데이터
        https://bd.kma.go.kr/kma2020/fs/energySelect1.do?pageNum=5&menuCd=F050701000#none


** 목표 데이터 프레임
   - DataFrame Column 리스트

** 데이터 분석

     1. 시간대별 평균 발전량 추이 분석 (bar, line)
       - 시간대별 발전량 추이 분석을 통해 가장 발전이 잘되는 시간대 구간 확인
  
    -> 발전량이 가장 높은 시간대 : 13시
        통상(12~14시) 태양이 최대 고도에 이른 시간대에 높은 발전량 수치가 나타남

     2. 태양광 발전량과 기상 데이터 각각의 상관관계 분석 (scatter, heatmap)
       - 발전량과 기상 데이터(강수량, 기온, 습도, 일사량, 일조시간, 전운량, 시정, 풍속,
         풍향)의 상관 관계 분석을 통해 발전량에 영향을 주는 기상 요소를 확인하여 추후 
         예측 모델에 활용

     3. 월별 합계 발전량, 합계 일조시간, 평균 일사량 추이 분석 (bar, line)
       - 월별 합계 발전량, 합계 일조시간, 평균 일사량, 평균 강수량 추이 분석을 통해 발전 
         효율이 좋은 월 선정


     4. 태양광 발전량과 연관성이 큰 기상 데이터 조합 케이스별 상관관계 분석(ANOVA)
       - 단일 기상 데이터별 상관계수와 연관성이 큰 기상 데이터 조합 케이스별 
         상관계수 비교

------------------------------------------------------------------------------------------------------------
** 결과물 작성

*) 개요
  - 주제
   태양광 발전-기상 데이터 간의 상관 관계
  - 선정 사유
   * 최대전력 수요 증가 관련 기사 
   * 발전량 예측에 대한 중요성 관련 기사
   * 발전량 예측 사업 관련 내용


*) 관련 지식 & 데이터 활용처
  - 관련 지식
   * 태양광 발전 원리
    참고자료 : https://solarnara.co.kr/article/%ED%83%9C%EC%96%91%EA%B4%91%EA%B5%90%EC%8B%A4/1002/72/
   * 데이터별 용어 정리 
     1. 발전량
      - 1시간 동안 만들어낸 전기에너지 양 (단위 : MWh)
      - 참고자료 : https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=actachiral&logNo=221079971975
      - 발전량 계산방법
        참고자료 : https://workingplace.tistory.com/2
     2. 기상 데이터별 
      * 주요
      - 일사량 (MJ/m^2)
        : 태양으로부터 오는 태양 복사 에너지(일사(日射))가 지표에 닿는 양
      - 일조시간 (hr)
        : 태양의 직사광이 지표면에 비친 시간
          (일정한 장소에 해가 떠서 질 때까지 태양에서 직접 오는 볕이 지구표면을 쬐는 시간)
        : 1시간을 기준으로 얼마나 조사되었는가를 나타낸 시간 (max : 1)
          -> categorical value로 일별, 월별, 년도별 평균값을 통한 도출 필요
      - 전운량 (10분위)
        : 구름의 많고 적음의 정도를 나타냄 (max : 10)
          (특정 지점에서 관찰할 때 구름이 하늘을 덮고 있는 정도)
          -> categorical value로 일별, 월별, 년도별 평균값을 통한 도출 필요
      * 기타
      - 시정 (10m)
        : 물체나 빛이 분명하게 보이는 최대 거리 (가시거리 기준) 
          (대기가 혼탁한 정도를 눈에 보이는 곳까지의 거리로 나타낸 것)
      - 강수량 (mm)
        : 어떤 곳에 일정 기간 동안 내린 물(비, 눈, 우박, 안개 등)의 총량
      - 풍향 (16방위)
        : 바람이 불어오는 방향으로 방위각의 정도로 풍향을 표시
      - 풍속 (m/s)
        : 바람의 속도
      - 습도 (%)
        : 공기 중에 포함된 수증기의 양 또는 비율을 나타내는 단위 (상대습도 %)
          (상대습도(%) = (실제 수증기압/포화수증기압)*100)     

  - 활용 데이터
    * 수집 필요 데이터
     1. 시간별 태양광 발전량
     2. 일사량, 강수량, 기온, 습도, 풍속, 풍향, 전운량 등의 기상 데이터

  - 데이터 수집방법 선정 근거
   * 기상 데이터
    기상 데이터의 경우 케이웨더, 웨더아이 등 기업 데이터는 유료로 제공되므로,
    무료로 제공되는 데이터 중 시간대별 필요 기상 데이터 7종을 받아올 수 있는
    기상청 기상자료개방포털에서 csv파일로 수집 
    * 케이웨더 : https://api.kweather.co.kr/apiguide/present.html
    * 웨더아이 : https://www.weatheri.co.kr/index.php

    기상자료개방포털
      - 종관기상관측(ASOS)
        https://data.kma.go.kr/data/grnd/selectAsosRltmList.do?pgmNo=36
      - 방재기상관측(AWS)
        https://data.kma.go.kr/data/grnd/selectAwsRltmList.do?pgmNo=56
      - 관측지점정보 (지점별 위도, 경도)
        https://data.kma.go.kr/tmeta/stn/selectStnList.do?pgmNo=123

   * 발전량 데이터
   - 발전량 데이터의 경우 발전소를 시공하는 시공사 혹은 모니터링 서비스 제공
     업체 사유 데이터 외 신뢰도 높은 데이터 수집이 어려워 한국전력거래소에서
     제공되는 시간대별 전력거래량 데이터를 csv파일로 수집
     (해당 데이터는 한전과 직접 거래하는 발전기, 자가 발전용 외 발전기의 발전량을 종합한 값)

     data.go.kr
      - 한국전력거래소_지역별 시간별 태양광 발전량
        https://www.data.go.kr/data/15065269/fileData.do


*) 초기 목표 설정
  - 초기 분석 목표
   * 태양광 발전이 어떻게 이루어지며 에너지가 최대로 생산되는 시점은 언제인가?
    - 시간대별 발전량 추이 분석(bar, line)
   * 태양광 발전에 영향을 미치는 기상 요인은 무엇인가?
    - 발전량과 기상 데이터 간 상관관계 분석 (scatter, heatmap)
   * 태양광 발전과 상관도가 높은 기상 데이터의 일별, 월별 추이는 어떤 형태일까?
    - 태양광 발전과 상관도가 높은 기상 데이터의 월별 추이 분석 
   * 태양광 발전량의 계절별, 년도별 집단 간 평균 차이가 있을까?
    - 계절별, 년도별 발전량 데이터를 통한 t-test, ANOVA를 통한 통계 검정 


*) 데이터 가공
  - 데이터 전처리 과정 설명
   1. 태양광 발전량 데이터 전처리
     * 발전량, 기상데이터 분석을 위해 환경요건을 최대한 동일하게 두기 위해 '부산' 지역으로 국한
     * 2023년 데이터의 경우 2월까지의 데이터 밖에 없어 분석에서 제외 (2017~2022년)
     * 기상 데이터의 시간 표시가 1시~24시로 0시~23시로 표현되는 발전량 데이터와 불일치
       -> 24시 데이터를 익일 00시로 변경
     * 년도별, 월별, 시간대별 분석을 위한 날짜 데이터 분리 (to_datetime, datetime.timedelta)
  
   2. 기상 데이터 병합 및 전처리
     * 기상데이터의 경우 년도별로 파일이 분리되어 있어 병합 처리
     * NaN의 경우 0.0으로 처리
     * 년도별, 월별, 시간대별 날짜 데이터 분리

   3. 발전량 데이터 - 기상 데이터 데이터프레임 병합(join)
     * 발전량 데이터의 경우 공백으로 채워져 있거나 null 값이 존재
      -> strip(), replace를 통한 전처리
     * 매년 1월 1일 00시 기상 데이터가 없어 병합 후 삭제 처리

  - 완성된 데이터 프레임
     * column : 년, 월, 일, 시간, 지역, 발전량, 강수량, 풍속, 풍향, 습도, 일조시간, 일사량, 전운량, 시정
     * 추가 수정 사항
      - 이후 데이터 분석과정에서 2018년 7월 20일 ~ 9월 15일 기상 데이터 누락 확인
       -> 2가지 형태로 데이터 처리
         case 1. 전체 년도의 월 평균값을 구해 추후 월별 발전량 추이에 활용
         case 2. 데이터 누락 부분을 2018년 시간대별 평균으로 대체

*) 데이터 탐색
  - 데이터 탐색(EDA)
     * pairplot 적용
      - 발전량과 강한 상관관계를 갖는 3가지 요소 확인
        양의 상관관계 : 일사량, 일조시간
        음의 상관관계 : 전운량


*) 분석 목표별 분석 및 시각화
   * 시간대별 발전량 추이 분석(bar, line)


   * 발전량과 기상 데이터 간 상관관계 분석 (scatter, heatmap)


   * 태양광 발전과 상관도가 높은 기상 데이터의 월별 추이 분석


   * 계절별, 년도별 발전량 데이터를 통한 t-test, ANOVA를 통한 통계 검정 


  - 추가된 데이터 분석& 시각화
   * 시간대별 발전량 추이가 일관성이 있는지 확인하기 위해 년도별로 분리하여 추이 분석


   * 상관도 분석 결과를 토대로 일사량, 일조시간, 전운량에 대한 회귀분석(regression analysis) 추가
   

   * 월별 발전량 추이가 일관성이 있는지 확인하기 위해 년도별로 분리하여 추이 분석
   * 년도별 설비용량 변화를 배제하기 위해 발전비율(해당월발전량/총발전량)을 산출하여 추이 분석


*) 고찰
   * 결론(요약)

   * 보완 사항
     - 지형, 모듈의 종류, 각도, 방향 등 환경적인 요인 배제로 인한 데이터 분석의 한계
       -> 관련 데이터를 추가하여 신뢰도를 높이는 방안 강구
           해당 부분 보완 시 전체 지역으로 확대해서 데이터 분석 진행